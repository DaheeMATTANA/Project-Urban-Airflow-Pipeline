version: 2

models:
  - name: fct_station_status
    description: "Fact model of gbfs station status"
    columns:
      - name: station_id
        description: "Id of the VÃ©lib station"
        data_type: string
        tests:
          - not_null

      - name: last_reported_cet
        description: "Timestamp of the last reported time in CET/CEST"
        data_type: timestamp

      - name: avg_num_bikes_available
        description: "Number of bikes available at the time of the report"
        data_type: integer
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 200

      - name: avg_num_docks_available
        description: "Number of bike docks available (empty) at the time of the report"
        data_type: integer
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 200

    tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - station_id
              - last_reported_cet
